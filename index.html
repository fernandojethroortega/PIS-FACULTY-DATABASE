<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Pagudpud Integrated School - Faculty Dashboard</title>
<style>
  :root {
    --blue:#0d3b66;
    --gold:#ffb703;
    --bg:#fff8e7;
  }
  body {
    font-family:Segoe UI, Tahoma, Geneva, Verdana, sans-serif;
    background:var(--bg);
    margin:0;
    padding:0;
  }

  #clock {
    position: absolute;
    top: 8px;
    left: 15px;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--blue);
    letter-spacing: 1px;
  }

  header {
    background:var(--blue);
    color:white;
    padding:10px 20px;
    text-align:center;
    margin-top:30px;
  }

  h1 { margin:0; font-size:1.5rem; }
  .container { padding:20px; }

  button {
    background:var(--gold);
    border:none;
    padding:8px 16px;
    border-radius:8px;
    cursor:pointer;
    font-weight:600;
    margin:4px;
  }
  button:hover { background:#ffca3a; }

  table {
    width:100%;
    border-collapse:collapse;
    margin-top:15px;
  }
  th, td {
    border:1px solid #ccc;
    padding:8px;
    text-align:left;
  }
  th { background:var(--blue); color:white; }

  .modal {
    display:none;
    position:fixed;
    z-index:1000;
    left:0; top:0;
    width:100%; height:100%;
    overflow:auto;
    background-color:rgba(0,0,0,0.5);
  }
  .modal-content {
    background:#fff;
    margin:3% auto;
    padding:20px;
    border-radius:10px;
    width:90%;
    max-width:650px;
  }
  .close {
    color:#aaa;
    float:right;
    font-size:24px;
    font-weight:bold;
  }
  .close:hover { color:black; cursor:pointer; }

  input, select {
    width:100%;
    padding:6px;
    margin:5px 0;
    border:1px solid #ccc;
    border-radius:5px;
  }

  .schedule-item {
    border:1px solid #ccc;
    padding:8px;
    border-radius:6px;
    background:#f9f9f9;
    margin:6px 0;
  }
</style>
</head>
<body>

<!-- Clock -->
<div id="clock"></div>

<header>
  <h1>Pagudpud Integrated School - Faculty Dashboard</h1>
</header>

<div class="container">
  <h2>Faculty Information</h2>
  <button onclick="openVacantModal()">Add Teacher</button>
  <button onclick="openSchedulesModal()">View Schedules</button>
  <button onclick="openContingencyModal()">Contingency Plan</button>
  <button onclick="openContingencyList()">Contingency List</button>
  <button onclick="openVacantChecker()">Check Vacant</button>

  <table id="facultyTable">
    <thead>
      <tr>
        <th>Name</th>
        <th>Position</th>
        <th>Specialization</th>
        <th>Contact</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="facultyList"></tbody>
  </table>
</div>

<!-- Info Modal -->
<div id="infoModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeInfoModal()">&times;</span>
    <h3>Teacher Information</h3>
    <div id="teacherInfo"></div>
  </div>
</div>

<!-- Add Teacher Modal -->
<div id="vacantModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeVacantModal()">&times;</span>
    <h3>Add Teacher</h3>

    <input type="text" id="empNum" placeholder="Employee Number">
    <input type="text" id="firstName" placeholder="First Name">
    <input type="text" id="middleName" placeholder="Middle Name">
    <input type="text" id="lastName" placeholder="Last Name">
    <input type="number" id="age" placeholder="Age">

    <label>Sex:</label>
    <select id="sex">
      <option value="">Select Sex</option>
      <option>Male</option>
      <option>Female</option>
    </select>

    <input type="text" id="address" placeholder="Address">

    <label>Position:</label>
    <select id="position">
      <option value="">Select Position</option>
      <option>Teacher I</option>
      <option>Teacher II</option>
      <option>Teacher III</option>
      <option>Teacher IV</option>
      <option>Teacher V</option>
      <option>Teacher VI</option>
      <option>Teacher VII</option>
      <option>Master Teacher I</option>
      <option>Master Teacher II</option>
      <option>Master Teacher III</option>
      <option>Master Teacher IV</option>
    </select>

    <input type="text" id="specialization" placeholder="Specialization">
    <input type="text" id="contact" placeholder="Contact Number">
    <input type="email" id="email" placeholder="Email Address">

    <button onclick="addTeacher()">Save</button>
  </div>
</div>

<!-- Add Schedule Modal -->
<div id="addScheduleModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeAddScheduleModal()">&times;</span>
    <h3>Add Schedule</h3>
    <div id="scheduleTeacherName" style="font-weight:600;margin-bottom:10px;"></div>
    <input type="text" id="schedSubject" placeholder="Subject">
    <input type="text" id="schedDay" placeholder="Day (e.g., Monday)">
    <input type="time" id="schedStart" placeholder="Start Time">
    <input type="time" id="schedEnd" placeholder="End Time">
    <input type="text" id="schedRoom" placeholder="Room">
    <button onclick="saveSchedule()">Save Schedule</button>
  </div>
</div>

<!-- Other Modals -->
<div id="schedulesModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeSchedulesModal()">&times;</span>
    <h3>Schedules</h3>
    <div id="schedulesList"></div>
  </div>
</div>

<div id="contModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeContingencyModal()">&times;</span>
    <h3>Create Contingency Plan</h3>
    <label>Absent Teacher:</label><br>
    <select id="absentTeacher"></select><br>
    <label>Substitute Teacher:</label><br>
    <select id="substituteTeacher"></select><br>
    <label>Subject:</label><br>
    <input type="text" id="subjectCont"><br>
    <label>Room:</label><br>
    <input type="text" id="roomCont"><br>
    <label>Date:</label><br>
    <input type="date" id="dateCont"><br>
    <label>Start Time:</label><br>
    <input type="time" id="startCont"><br>
    <label>End Time:</label><br>
    <input type="time" id="endCont"><br>
    <button onclick="addContingency()">Save Contingency</button>
  </div>
</div>

<div id="contListModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeContingencyList()">&times;</span>
    <h3>Contingency Plans</h3>
    <div id="contList"></div>
  </div>
</div>

<div id="vacantCheckerModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeVacantChecker()">&times;</span>
    <h3>Vacant Schedule Checker</h3>
    <div id="vacantCheckerList"></div>
  </div>
</div>

<script>
let teachers = [];
let contingency = [];
let currentScheduleTeacher = null;

/* Add Teacher Function */
function addTeacher() {
  const empNum = document.getElementById('empNum').value.trim();
  const firstName = document.getElementById('firstName').value.trim();
  const middleName = document.getElementById('middleName').value.trim();
  const lastName = document.getElementById('lastName').value.trim();
  const age = document.getElementById('age').value.trim();
  const sex = document.getElementById('sex').value;
  const address = document.getElementById('address').value.trim();
  const position = document.getElementById('position').value;
  const specialization = document.getElementById('specialization').value.trim();
  const contact = document.getElementById('contact').value.trim();
  const email = document.getElementById('email').value.trim().toLowerCase();

  if(!firstName || !lastName || !position) {
    alert('Please complete the required fields (Name and Position).');
    return;
  }

  const fullName = `${firstName} ${middleName ? middleName + ' ' : ''}${lastName}`;
  teachers.push({ empNum, firstName, middleName, lastName, fullName, age, sex, address, position, specialization, contact, email, schedules: [] });
  renderTableFiltered();
  closeVacantModal();

  ['empNum','firstName','middleName','lastName','age','sex','address','position','specialization','contact','email'].forEach(id=>{
    document.getElementById(id).value='';
  });
}

/* Render Teacher Table */
function renderTableFiltered() {
  const tbody = document.getElementById('facultyList');
  tbody.innerHTML = teachers.map((t, i) => `
    <tr>
      <td>${t.fullName}</td>
      <td>${t.position}</td>
      <td>${t.specialization}</td>
      <td>${t.contact}</td>
      <td>
        <button onclick="viewTeacher(${i})">View</button>
        <button onclick="openAddSchedule(${i})">Add Schedule</button>
      </td>
    </tr>
  `).join('');
  populateContDropdown();
}

/* View Teacher */
function viewTeacher(i) {
  const t = teachers[i];
  const scheds = t.schedules.length
    ? t.schedules.map(s=>`<li>${s.subject} - ${s.day} ${s.start}–${s.end} (${s.room})</li>`).join('')
    : '<i>No schedules yet.</i>';

  const info = `
    <p><strong>Employee No:</strong> ${t.empNum || '-'}</p>
    <p><strong>Name:</strong> ${t.fullName}</p>
    <p><strong>Age:</strong> ${t.age || '-'}</p>
    <p><strong>Sex:</strong> ${t.sex || '-'}</p>
    <p><strong>Address:</strong> ${t.address || '-'}</p>
    <p><strong>Position:</strong> ${t.position}</p>
    <p><strong>Specialization:</strong> ${t.specialization || '-'}</p>
    <p><strong>Contact:</strong> ${t.contact || '-'}</p>
    <p><strong>Email:</strong> ${t.email || '-'}</p>
    <p><strong>Schedules:</strong></p>
    <ul>${scheds}</ul>
  `;
  document.getElementById('teacherInfo').innerHTML = info;
  document.getElementById('infoModal').style.display='block';
}

/* Add Schedule Modal */
function openAddSchedule(i) {
  currentScheduleTeacher = i;
  const t = teachers[i];
  document.getElementById('scheduleTeacherName').textContent = `Teacher: ${t.fullName}`;
  document.getElementById('addScheduleModal').style.display='block';
}

/* Save Schedule */
function saveSchedule() {
  const subject = document.getElementById('schedSubject').value.trim();
  const day = document.getElementById('schedDay').value.trim();
  const start = document.getElementById('schedStart').value;
  const end = document.getElementById('schedEnd').value;
  const room = document.getElementById('schedRoom').value.trim();

  if(!subject || !day || !start || !end) {
    alert('Please complete all schedule fields.');
    return;
  }

  teachers[currentScheduleTeacher].schedules.push({ subject, day, start, end, room });
  alert('Schedule added successfully!');
  closeAddScheduleModal();
}

/* Contingency Functions */
function addContingency(){
  const absent = document.getElementById('absentTeacher').value;
  const substitute = document.getElementById('substituteTeacher').value;
  const subject = document.getElementById('subjectCont').value;
  const room = document.getElementById('roomCont').value;
  const date = document.getElementById('dateCont').value;
  const start = document.getElementById('startCont').value;
  const end = document.getElementById('endCont').value;

  if(!absent || !substitute) return alert('Please select teachers.');
  contingency.push({ absent, substitute, subject, room, date, start, end });
  alert('Contingency Plan Added!');
  closeContingencyModal();
}

/* Populate Contingency Dropdowns */
function populateContDropdown(){
  const absent = document.getElementById('absentTeacher');
  const substitute = document.getElementById('substituteTeacher');
  absent.innerHTML = teachers.map(t=>`<option>${t.fullName}</option>`).join('');
  substitute.innerHTML = teachers.map(t=>`<option>${t.fullName}</option>`).join('');
}

/* Clock */
function updateClock(){
  const now = new Date();
  let hours = now.getHours();
  const minutes = now.getMinutes().toString().padStart(2,'0');
  const seconds = now.getSeconds().toString().padStart(2,'0');
  const ampm = hours >= 12 ? 'PM' : 'AM';
  hours = hours % 12 || 12;
  document.getElementById('clock').textContent = `${hours}:${minutes}:${seconds} ${ampm}`;
}
setInterval(updateClock,1000);
updateClock();

/* Modal Controls */
function openVacantModal(){ document.getElementById('vacantModal').style.display='block'; }
function closeVacantModal(){ document.getElementById('vacantModal').style.display='none'; }
function closeAddScheduleModal(){ document.getElementById('addScheduleModal').style.display='none'; }
function openSchedulesModal(){ document.getElementById('schedulesModal').style.display='block'; }
function closeSchedulesModal(){ document.getElementById('schedulesModal').style.display='none'; }
function openContingencyModal(){ document.getElementById('contModal').style.display='block'; }
function closeContingencyModal(){ document.getElementById('contModal').style.display='none'; }
function openContingencyList(){ 
  document.getElementById('contListModal').style.display='block';
  document.getElementById('contList').innerHTML = contingency.map((c,i)=>`
    <div class="schedule-item">
      <div><strong>${i+1}. ${c.absent}</strong> ➜ ${c.substitute}<br>
      ${c.subject} (${c.room})<br>${c.date} ${c.start}-${c.end}</div>
    </div>`).join('');
}
function closeContingencyList(){ document.getElementById('contListModal').style.display='none'; }
function openVacantChecker(){ document.getElementById('vacantCheckerModal').style.display='block'; }
function closeVacantChecker(){ document.getElementById('vacantCheckerModal').style.display='none'; }
function closeInfoModal(){ document.getElementById('infoModal').style.display='none'; }

renderTableFiltered();
</script>

</body>
</html>
