<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pagudpud Integrated School Faculty Database</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #fff8e7;
      margin: 0;
      padding: 0;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #ffb703;
      color: #0d3b66;
      padding: 20px 40px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.2);
    }

    header img {
      width: 120px;
      height: auto;
      object-fit: contain;
      border-radius: 50%;
    }

    header h1 {
      font-size: 28px;
      margin: 0;
    }

    #admin-login {
      text-align: right;
    }

    #admin-login input {
      padding: 6px;
      margin-left: 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    #admin-login button {
      padding: 6px 10px;
      background-color: #0d3b66;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    main {
      padding: 30px;
    }

    .search-bar input {
      width: 300px;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-bottom: 15px;
      text-transform: uppercase;
    }

    .buttons {
      margin-bottom: 20px;
    }

    button {
      padding: 10px 15px;
      background-color: #0d3b66;
      color: white;
      border: none;
      border-radius: 5px;
      margin-right: 10px;
      cursor: pointer;
    }

    button:hover {
      background-color: #1d5ca0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: center;
      text-transform: uppercase;
    }

    th {
      background-color: #ffb703;
      color: #0d3b66;
    }

    /* MODAL FORM */
    .modal {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0; top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
    }

    .modal-content {
      background-color: white;
      margin: 5% auto;
      padding: 20px;
      width: 500px;
      border-radius: 10px;
    }

    .modal-content input {
      width: 100%;
      padding: 8px;
      margin: 6px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
      text-transform: uppercase;
    }

    .close {
      color: red;
      float: right;
      font-size: 20px;
      font-weight: bold;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>
    <div style="display:flex; align-items:center; gap:15px;">
      <img src="PIS OFFICIAL SEAL.png" alt="School Logo">
      <h1>Pagudpud Integrated School Faculty Database</h1>
    </div>
    <div id="admin-login">
      <input type="password" id="adminPassword" placeholder="Admin Password">
      <button onclick="login()">Login</button>
    </div>
  </header>

  <main>
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="Search teacher...">
    </div>

    <div class="buttons">
      <button onclick="openModal()">Add Teacher</button>
      <button onclick="exportToExcel()">Export to Excel</button>
    </div>

    <table id="facultyTable">
      <thead>
        <tr>
          <th>First Name</th>
          <th>Middle Name</th>
          <th>Last Name</th>
          <th>Position</th>
          <th>Employee Number</th>
          <th>Sex</th>
          <th>Age</th>
          <th>Address</th>
          <th>Contact Number</th>
          <th>Email</th>
          <th>Specialization</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </main>

  <!-- ADD TEACHER MODAL -->
  <div id="teacherModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <h3>Add Teacher</h3>
      <input type="text" id="firstName" placeholder="First Name" required>
      <input type="text" id="middleName" placeholder="Middle Name">
      <input type="text" id="lastName" placeholder="Last Name" required>
      <input type="text" id="position" placeholder="Position" required>
      <input type="text" id="empNumber" placeholder="Employee Number" required>
      <input type="text" id="sex" placeholder="Sex" required>
      <input type="number" id="age" placeholder="Age" required>
      <input type="text" id="address" placeholder="Address" required>
      <input type="text" id="contact" placeholder="Contact Number" required>
      <input type="email" id="email" placeholder="Email" required>
      <input type="text" id="specialization" placeholder="Specialization" required>
      <button onclick="addTeacher()">Save</button>
    </div>
  </div>

  <script>
    let adminAccess = false;

    function login() {
      const password = document.getElementById('adminPassword').value;
      if (password === "ADMIN123") {
        adminAccess = true;
        alert("Admin access granted. You can now add or edit teachers.");
      } else {
        alert("Incorrect password!");
      }
    }

    function openModal() {
      if (!adminAccess) {
        alert("Please enter admin password before adding a teacher.");
        return;
      }
      document.getElementById('teacherModal').style.display = "block";
    }

    function closeModal() {
      document.getElementById('teacherModal').style.display = "none";
    }

    function addTeacher() {
      if (!adminAccess) {
        alert("Please log in as admin before adding data.");
        return;
      }

      const fields = [
        "firstName", "middleName", "lastName", "position", "empNumber",
        "sex", "age", "address", "contact", "email", "specialization"
      ];

      const newRow = document.createElement("tr");
      fields.forEach(id => {
        const td = document.createElement("td");
        let value = document.getElementById(id).value.trim().toUpperCase();
        td.textContent = value;
        newRow.appendChild(td);
        document.getElementById(id).value = "";
      });

      document.querySelector("#facultyTable tbody").appendChild(newRow);
      closeModal();
    }

    // SEARCH FUNCTION
    document.getElementById('searchInput').addEventListener('keyup', function() {
      let filter = this.value.toUpperCase();
      let rows = document.querySelectorAll("#facultyTable tbody tr");
      rows.forEach(row => {
        let text = row.textContent || row.innerText;
        row.style.display = text.toUpperCase().includes(filter) ? "" : "none";
      });
    });

    // EXPORT TO EXCEL
    function exportToExcel() {
      let table = document.getElementById("facultyTable");
      let rows = table.rows;
      let csv = [];
      for (let i = 0; i < rows.length; i++) {
        let cols = rows[i].querySelectorAll("td, th");
        let row = [];
        cols.forEach(col => row.push(col.innerText));
        csv.push(row.join(","));
      }
      let csvFile = new Blob([csv.join("\n")], { type: "text/csv" });
      let link = document.createElement("a");
      link.href = URL.createObjectURL(csvFile);
      link.download = "faculty_database.csv";
      link.click();
    }
  </script>
</body>
</html>
